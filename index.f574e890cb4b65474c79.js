(()=>{"use strict";var t,e={8470:(t,e,s)=>{s(4669);var a=s(3132),n=s(9717);const i=["rank 1","rank 2","rank 3","rank 4","rank 5"];function r(t,e,s,a){if(a>=i.length)return 0;const n=i[a];return t.categories[s][n]!==e.categories[s][n]?t.categories[s][n]-e.categories[s][n]:r(t,e,s,a+1)}const o=(t,e)=>{let s;return function(...a){s&&clearTimeout(s),s=setTimeout((()=>{t.call(this,...a),clearTimeout(s)}),e)}};var l=s(4627);class h{activeCategory="Total";static comparePlayerEntries(t){return function(e,s){return r(e.getOptions(),s.getOptions(),t,0)}}constructor(t,e){this.options=e,this.className="leaderboard",this.activeCategory=this.options.sortBy,this.$component=t.find(`.js-${this.className}`),this.$tableBody=this.$component.find(`.js-${this.className}__table-body`),this.playerEntries=e.players.map((t=>new class{constructor(t){this.options=t,this.className="leaderboard",this.$component=this.initHtml(),this.$rank=this.$component.find(`.js-${this.className}__table-cell-rank`),this.$ranks=this.$component.find(`.js-${this.className}__table-cell-total-ranks`),this.$link=this.$component.find(`.js-${this.className}__table-cell-name-link`)}getOptions(){return this.options.player}getHtml(){return this.$component}hasAnyRanks(t){for(let e=0;e<i.length;e++)if(this.options.player.categories[t][i[e]]>0)return!0;return!1}updateCategories(t){this.options.player.categories=t}update(t,e){this.setRank(e);const s=this.options.player.categories[t];this.setRanks(s)}makeActive(t){this.$rank.addClass(`${this.className}__table-cell-rank_rank${t}`)}removeActive(t){this.$rank.removeClass(`${this.className}__table-cell-rank_rank${t}`)}initHtml(){const t=new Array(5).fill(0).map(((t,e)=>`\n      <td\n        class="${this.className}__table-cell-total-ranks js-${this.className}__table-cell-total-ranks ${this.className}__table-cell-total-ranks_rank${e+1}">\n        0\n      </td>\n    `)).join("");return l(`\n        <tr class="${this.className}__table-row js-${this.className}__table-row ${this.className}__table-row_body">\n          <td class="${this.className}__table-cell-rank js-${this.className}__table-cell-rank">\n            1\n          </td>\n          <td class="${this.className}__table-cell-name ${this.className}__table-cell-name_body">\n            <a class="${this.className}__table-cell-name-link js-${this.className}__table-cell-name-link" href="${this.getPlayerProfileUrl(this.options.player.name)}">\n              ${this.options.player.name}\n            </a>\n          </td>\n          ${t}\n        </tr>\n      `)}getPlayerProfileUrl(t){const e=new URLSearchParams(window.location.search);return e.set("player",t),function(t){const e=location.pathname.split("/");return e[e.length-1]=t,e.join("/")}(`player-profile.html?${e.toString()}`)}setRank(t){this.$rank.html(t.toString()),new Array(3).fill(0).forEach(((t,e)=>this.removeActive(e+1))),t>=1&&t<=3&&this.makeActive(t)}setRanks(t){this.$ranks.each(((e,s)=>{l(s).html(t[i[e]].toString())}))}}({player:t})))}updateCategories(t){t.sort(((t,e)=>t.name>e.name?1:t.name<e.name?-1:0)),this.playerEntries.sort(((t,e)=>t.getOptions().name>e.getOptions().name?1:t.getOptions().name<e.getOptions().name?-1:0)),this.playerEntries.forEach(((e,s)=>e.updateCategories(t[s].categories)))}generatePlayerEntries(t,e,s=!0){this.activeCategory=t;const a=this.playerEntries.sort(h.comparePlayerEntries(this.activeCategory)).reverse();return s&&a.forEach(((t,e)=>{t.update(this.activeCategory,e+1)})),a.filter((t=>t.getOptions().name.toLowerCase().includes(e.trim().toLowerCase())))}render(t){this.$tableBody.empty(),t.forEach((t=>{const e=t.getHtml();this.$tableBody.append(e)}))}}const c=h;var p=s(6295),d=s(9284),y=s(1263);!function(t){const e=s(5478),r=s(559),l=r.data,h=new URLSearchParams(window.location.search),m=Object.fromEntries(h.entries()),u={sortBy:void 0===m.sortBy?"Total":m.sortBy,topRanks:l,...e};new a.Z(t(".js-layout"),{header:{date:r.date}}),new class{category="Total";player="";tiedPlayersFrom=null;tiedPlayersTo=null;constructor(t,e){this.options=e,this.className="landing",this.$component=t,this.$pagination=this.$component.find(`.js-${this.className}__pagination`),this.$categoryMenu=this.$component.find(`.js-${this.className}__category-menu`),this.category=this.options.sortBy,this.$resetButton=this.$component.find(`.js-${this.className}__reset-button`);const s={...this.options.categoryMenu,sortBy:this.options.sortBy,onChange:this.handleMenuChange.bind(this)};new d.Z(this.$component.find(`.js-${this.className}__expander`)),this.inputPlayerName=new y.Z(this.$component.find(`.js-${this.className}__input-player-name`),{onChange:o(this.handleInputNameChange.bind(this),250)}),this.inputTiedPlayersFrom=new y.Z(this.$component.find(`.js-${this.className}__input-tied-players-from`),{onChange:o(this.handleInputTiedPlayersFromChange.bind(this),250)}),this.inputTiedPlayersTo=new y.Z(this.$component.find(`.js-${this.className}__input-tied-players-to`),{onChange:o(this.handleInputTiedPlayersToChange.bind(this),250)}),this.categoryMenu=new n.Z(this.$categoryMenu,s),this.leaderboard=new c(this.$component.find(`.js-${this.className}__leaderboard`),{sortBy:this.options.sortBy,players:this.calcPlayersTopRanks(this.options.topRanks)}),this.pagination=new p.Z(this.$pagination),this.setHandlers(),this.render()}calcPlayersTopRanks(t,e=this.tiedPlayersFrom,s=this.tiedPlayersTo){const a={};return t.forEach((t=>{const{topFinishes:n}=t;n.forEach((({name:r,rank:o})=>{void 0===a[r]&&(a[r]=this.initMapTypes());const l=n.filter((t=>t.rank===o)).length;o<=5&&(null===e||l>=e)&&(null===s||l<=s)&&(a[r][t.category][i[o-1]]+=1,a[r].Total[i[o-1]]+=1)}))})),Object.entries(a).map((([t,e])=>({name:t,categories:e})))}initRankTypes(){return{"rank 1":0,"rank 2":0,"rank 3":0,"rank 4":0,"rank 5":0}}initMapTypes(){return{Easy:this.initRankTypes(),Main:this.initRankTypes(),Hard:this.initRankTypes(),Insane:this.initRankTypes(),Mod:this.initRankTypes(),Extreme:this.initRankTypes(),Total:this.initRankTypes(),Solo:this.initRankTypes()}}setHandlers(){this.$resetButton.on("click.resetButton",this.handleResetButtonClick.bind(this))}handleResetButtonClick(){this.player="",this.category="Total",this.inputPlayerName.setValue(this.player),this.categoryMenu.setCategory(this.category),this.tiedPlayersFrom=null,this.inputTiedPlayersFrom.setValue(""),this.tiedPlayersTo=null,this.inputTiedPlayersTo.setValue("");const t=this.calcPlayersTopRanks(this.options.topRanks);this.leaderboard.updateCategories(t),this.render()}handleInputNameChange(t){this.player=t,this.render(!1)}handleInputTiedPlayersFromChange(t){const e=parseInt(t),s=Number.isNaN(e)?null:e;this.tiedPlayersFrom=s;const a=this.calcPlayersTopRanks(this.options.topRanks);this.leaderboard.updateCategories(a),this.render()}handleInputTiedPlayersToChange(t){const e=parseInt(t),s=Number.isNaN(e)?null:e;this.tiedPlayersTo=s;const a=this.calcPlayersTopRanks(this.options.topRanks);this.leaderboard.updateCategories(a),this.render()}handleMenuChange(t){this.category=t,this.render()}render(t=!0){this.pagination.render(this.leaderboard.generatePlayerEntries(this.category,this.player,t),this.leaderboard.render.bind(this.leaderboard))}}(t(".js-landing"),u)}(s(4627))},5478:t=>{t.exports=JSON.parse('{"categoryMenu":{"categories":["Total","Extreme","Insane","Hard","Main","Easy","Solo","Mod"]},"expander":{"title":"Filtering options"},"inputPlayerName":{"title":"Filter by player","placeholder":"Player","icon":"search"},"inputTiedPlayersFrom":{"title":"Tied players from","type":"number"},"inputTiedPlayersTo":{"title":"Tied players to","type":"number"}}')}},s={};function a(t){var n=s[t];if(void 0!==n)return n.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,a),i.exports}a.m=e,t=[],a.O=(e,s,n,i)=>{if(!s){var r=1/0;for(c=0;c<t.length;c++){for(var[s,n,i]=t[c],o=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((t=>a.O[t](s[l])))?s.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(c--,1);var h=n();void 0!==h&&(e=h)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[s,n,i]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&!t;)t=s[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={826:0};a.O.j=e=>0===t[e];var e=(e,s)=>{var n,i,[r,o,l]=s,h=0;if(r.some((e=>0!==t[e]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var c=l(a)}for(e&&e(s);h<r.length;h++)i=r[h],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(c)},s=self.webpackChunk=self.webpackChunk||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var n=a.O(void 0,[627,871,215],(()=>a(8470)));n=a.O(n)})();